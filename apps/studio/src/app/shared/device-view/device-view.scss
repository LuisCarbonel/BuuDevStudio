/* Canvas / device plate styling */
.device-view-shell {
  --dv-plate-bg: radial-gradient(120% 140% at 50% 10%, #f8fbff 0%, #e6edf6 40%, #dfe8f3 100%);
  --dv-plate-ring: rgba(70, 111, 195, 0.08);
  --dv-plate-shadow: 0 10px 30px rgba(46, 69, 94, 0.12), 0 2px 10px rgba(46, 69, 94, 0.12);
  --dv-plate-ambient: inset 0 20px 40px rgba(0, 0, 0, 0.03);
  width: 100%;
  height: 100%;
  position: relative;
  box-sizing: border-box;
  padding: 14px;
  background: var(--dv-plate-bg);
  border-radius: 18px;
  box-shadow: var(--dv-plate-shadow), var(--dv-plate-ambient);
  border: 1px solid rgba(76, 103, 143, 0.08);
  overflow: hidden;
}

.device-view-shell::after {
  content: '';
  position: absolute;
  inset: 8px;
  border-radius: 14px;
  background: radial-gradient(circle at 50% 30%, var(--dv-plate-ring), transparent 55%);
  pointer-events: none;
}

.device-view-shell::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(120% 80% at 50% 110%, rgba(35, 53, 86, 0.04), transparent 60%);
  mix-blend-mode: multiply;
  pointer-events: none;
}

.device-view-svg {
  width: 100%;
  height: 100%;
  background: transparent;
  overflow: visible;
}

/* Key / control states */
.key,
.control {
  transition: transform 180ms cubic-bezier(0.22, 0.61, 0.36, 1);
  transform-origin: center;
}

.key .key-cap {
  fill: #f6f8fd;
  stroke: #cdd8e6;
  stroke-width: 0.05;
  paint-order: stroke fill;
  filter: drop-shadow(0.08px 0.12px 0.18px rgba(36, 57, 83, 0.18));
  transition: fill 160ms ease, stroke 160ms ease, stroke-width 160ms ease, filter 160ms ease, transform 180ms ease;
}

.key .key-cap {
  fill: #e8eef8;
}

.key.bound .key-cap {
  fill: #dbe7f7;
  stroke: #88a8d6;
}

.key.hovered .key-cap {
  stroke: #4f7bc9;
  stroke-width: 0.08;
  filter: drop-shadow(0.1px 0.16px 0.22px rgba(52, 84, 136, 0.3));
}

.key.hovered {
  transform: translateY(-0.04px) scale(1.01);
}

.key.selected .key-cap {
  fill: #d1e0fa;
  stroke: #3f6fc3;
  stroke-width: 0.09;
  filter: drop-shadow(0.14px 0.22px 0.32px rgba(63, 111, 195, 0.32));
}

.key.selected {
  transform: translateY(-0.06px) scale(1.015);
}

.key.dragging .key-cap {
  opacity: 0.85;
  stroke: #3f6fc3;
  stroke-width: 0.1;
  filter: drop-shadow(0.22px 0.36px 0.52px rgba(63, 111, 195, 0.4));
}

.key .key-label {
  font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
  font-size: 0.32px;
  font-weight: 700;
  fill: #4a5665;
  pointer-events: none;
  text-shadow: 0 0.08px 0.2px rgba(40, 55, 75, 0.35);
}

.control .control-body {
  fill: #e7eef7;
  stroke: #c3d2e3;
  stroke-width: 0.05;
  paint-order: stroke fill;
  filter: drop-shadow(0.08px 0.12px 0.18px rgba(36, 57, 83, 0.18));
  transition: fill 160ms ease, stroke 160ms ease, stroke-width 160ms ease, filter 160ms ease, transform 180ms ease;
}

.control.bound .control-body {
  fill: #d8e4f4;
  stroke: #88a8d6;
}

.control.hovered .control-body {
  stroke: #4f7bc9;
  stroke-width: 0.08;
}

.control.selected .control-body {
  fill: #d1e0fa;
  stroke: #3f6fc3;
  stroke-width: 0.09;
  filter: drop-shadow(0.14px 0.22px 0.32px rgba(63, 111, 195, 0.32));
}

.control .control-label {
  font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
  font-size: 0.28px;
  font-weight: 700;
  fill: #4a5665;
  pointer-events: none;
  text-shadow: 0 0.08px 0.2px rgba(40, 55, 75, 0.35);
}

.drop-overlay {
  position: absolute;
  inset: 0;
  z-index: 2;
  pointer-events: none;
}

.drop-hit {
  position: absolute;
  pointer-events: auto;
  cursor: pointer;
  border: 1px dashed transparent;
  border-radius: 8px;
  transition: border-color 120ms ease, background 120ms ease;
}

.drop-hit:active {
  cursor: grabbing;
}

.drop-hit.cdk-drop-list-dragging {
  border-color: #1677ff;
  background: rgba(22, 119, 255, 0.12);
}

.drop-hit:hover {
  border-color: rgba(22, 119, 255, 0.28);
  background: rgba(22, 119, 255, 0.08);
}

.drop-hit:focus-visible {
  outline: 2px solid rgba(22, 119, 255, 0.35);
  outline-offset: 1px;
}

@media (prefers-reduced-motion: reduce) {
  .key,
  .control {
    transition: none;
  }
}
