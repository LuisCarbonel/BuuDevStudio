<div class="pane pane--canvas">
  <div class="pane-title">Canvas</div>

  <div class="canvas-tabs">
    <button
      class="tab"
      type="button"
      [class.active]="canvasView === 'device'"
      (click)="setView('device')"
    >
      Device View
    </button>
    <button
      class="tab"
      type="button"
      [class.active]="canvasView === 'sequance'"
      [disabled]="!hasSequance"
      [attr.aria-disabled]="!hasSequance ? 'true' : null"
      (click)="setView('sequance')"
    >
      Sequance View
    </button>
  </div>

  <div class="layout-toolbar">
    <span class="muted">Layout provided by connected device.</span>
    <button class="btn ghost" type="button" (click)="toggleLayoutMode.emit()">
      {{ layoutMode === 'view' ? 'Edit layout' : 'View mode' }}
    </button>
  </div>

  <div class="pane-body pane-body--canvas">
    <div class="device-view" *ngIf="canvasView === 'device'">
      <ng-container *ngIf="normalizedLayout; else noLayout">
        <app-device-view
          [layout]="normalizedLayout"
          [selection]="layoutSelectionId"
          [hoverId]="hoveredElementId"
          [mode]="layoutMode"
          [unitPx]="layoutUnitPx"
          [bindingIndicators]="bindingIndicators"
          [dropConnectedTo]="[]"
          [dropEnabled]="false"
          (pointerdown)="$event.stopPropagation()"
          (select)="select.emit($event)"
          (deselect)="deselect.emit()"
          (hover)="hover.emit($event)"
          (moveDelta)="moveDelta.emit($event)"
          (assignDrop)="onAssignDrop($event.targetId, $event.payload)"
        ></app-device-view>
      </ng-container>
      <ng-template #noLayout>
        <div class="canvas-placeholder">
          Connect to a device to load its layout.
        </div>
      </ng-template>
    </div>

    <div class="device-view" *ngIf="canvasView === 'sequance'">
      <div class="canvas-placeholder">
        Select a step to edit.
      </div>
    </div>
  </div>
</div>
